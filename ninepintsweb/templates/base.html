{% load static %}
{% load wagtailuserbar wagtailcore_tags wagtailimages_tags %}

<!DOCTYPE html>
<html>
    <head>
        <title>{% block title %}{% if title_root %}ninepints{% else %}{% firstof title page.seo_title page.title %} - ninepints{% endif %}{% endblock %}</title>

        <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/brando.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/brandosans.css' %}"/>
        {% block extra_css %}{% endblock %}
    </head>

    <body>
        {% wagtailuserbar %}

        {% if page.hero_image %}
            {% image page.hero_image original as hero_image %}
            <header id="hero" class="with_image" style="background-image: url({{ hero_image.url }})">
                <div id="hero_gradient">
        {% else %}
            <header id="hero">
        {% endif %}

        {% block hero_content %}
            <div class="col_container">
                <h1 class="col8">{% firstof hero_title title page.title "ninepints" %}</h1>
            </div>
        {% endblock %}

        {% if page.hero_image %}
            </div>
        {% endif %}
        </header>

        <nav id="main_nav"><div class="col_container">
                <ul class="col8">
                    <li><a href="{% pageurl request.site.root_page %}">Home</a></li>
                    <li><a href="{% slugurl 'about' %}">About</a></li>
                </ul>
        </div></nav>

        {% block content %}{% endblock %}

        {% if page.hero_image %}
            <script type="text/javascript" src="{% static 'lib/jquery-2.2.3.min.js' %}"></script>
            <script type="text/javascript">//<![CDATA[
                $(function() {
                    var doc = $(document), hero = $('#hero');
                    if (!hero.hasClass('with_image')) return;
                    doc.on('scroll', function(event) {
                        var offset = Math.max(0, doc.scrollTop() / 3);
                        hero.css({'background-position': '50% ' + offset + 'px'})
                    });
                });
            //]]></script>
        {% endif %}
        {% block extra_js %}{% endblock %}
    </body>
</html>
